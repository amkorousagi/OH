<!DOCTYPE html>
<html lang="kor">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>KNU Judge</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
    <link href="css/prosub.css" rel="stylesheet" />
    <script src="jquery-3.6.0.min.js"></script>
    <script>
        function textarea_tab(ob) {
            if (event.keyCode == 9) {
                ob.focus();
                space = "    ";
                ob.selection = document.selection.createRange();
                ob.selection.text = space;
                event.returnValue = false;
            }
        }
        function request() {
            console.log("fd")
            const title = document.getElementsByName("pro_title").value;
            const diff = document.getElementsByName("level").value;
            const cont = document.getElementsByName("pro_content").value;
            const input = document.getElementsByName("pro_input").value;
            const output = document.getElementsByName("pro_output").value;
            const keyword = document.getElementsByName("pro_alg").value;
            const obj = {Title:title, Description:cont, Difficulty:diff,
                    Keyword:keyword, TestCase:[{Input:input, Output:output}]};
                    
            console.log(obj)
            $.ajax({
                type:'POST',
                url:"http://localhost:3001/problem",
                accepts: "application/json",
                data : JSON.stringify(obj),
                contentType: "application/json; charset=utf-8",
                success:function(data){
                    console.log(data)
                    if(data){
                        alert("문제가 출제되었습니다.")
                    }
                    else{
                        alert("작성오류")
                    }
                },
                error:function(a, b, c){
                    console.log(a, b, c)
                },
                beforeSend: function (xhr) {
                    /* Authorization header */
                    xhr.setRequestHeader("Authorization", "bearer " + `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGMzNTNmYjhmNWM4YzMyMGE5MmUxNmMiLCJVc2VySWQiOiJwc2MiLCJVc2VyUGFzc3dvcmQiOiIkMmIkMTAkZ3dlb1FZRmZleWsxZXpsQ3VjMHZ6dVgubUtVSjJObkozZ3dyN1VLTkpxSnhKTnp2M1VtUzIiLCJOaWNrbmFtZSI6Im15bmlja25hbWUiLCJEYXRlIjoiMjAyMS0wNi0xMVQxMjoxNTo1NS41NzhaIiwiU29sdmVkUHJvYmxlbSI6W10sIl9fdiI6MCwiaWF0IjoxNjIzNDEzNzY3LCJleHAiOjE2MjM2NzI5Njd9.itQzum8hiqma7K3liyiyuwjZ4Q3owGkQldlBx1WQzm4`);
                    
                }
            })
            
        }
    </script>
</head>

<body>
    <!-- Responsive navbar-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container px-5">
            <a class="navbar-brand" href="#" onclick="location.href='/'">KNU Online Judge</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="/problem_list">문제</a></li>
                    <li class="nav-item"><a class="nav-link" href="/community_list">게시판</a></li>
                    <li class="nav-item"><a class="nav-link" href="/ranking">순위</a></li>
                    <li class="nav-item"><a class="nav-link" href="/about">소개</a></li>
                    <li class="nav-item"><a class="nav-link" href="/login">로그인</a></li>
                    <li class="nav-item"><a class="nav-link" href="/register">회원가입</a></li>
                </ul>
            </div>
        </div>
    </nav>
    </br>
    <h2>&nbsp; 문제 출제하기</h2>
    <hr></br>
    <form name="proinfo" method="POST" accept-charset="utf-8">
        <table class="submit_table">
            <tr>
                <td>
                    <h4>제목</h4>
                </td>
                <td colspan="5" id="title">
                    <input size="100px" type="text" name="pro_title" value="title">
                </td>
            </tr>
            <tr>
                <td colspan="6">
                    <span>
                        <h5>난이도&nbsp;&nbsp;
                    </span>
                    <input type="radio" name="level" value="high">high&nbsp;&nbsp;
                    <input type="radio" name="level" value="middle">middle&nbsp;&nbsp;
                    <input type="radio" name="level" value="low">low</h5>
                </td>
            </tr>
        </table>
        </br>
        <div>
            <div><textarea onkeydown="textarea_tab(this)" class="detail" name="pro_content" value="content" placeholder="문제를 입력해주세요."></textarea></br>
            </div>
        </div>
        <div>
            <span>
                <h5 class="header">&nbsp;입력&nbsp;</h5>
            </span>
            <hr class="case_hr">
            <div><textarea onkeydown="textarea_tab(this)" class="case" value="input" name="pro_input"></textarea></br></div>
        </div>
        <div>
            <span>
                <h5 class="header">&nbsp;출력&nbsp;</h5>
            </span>
            <hr class="case_hr">
            <div><textarea onkeydown="textarea_tab(this)" class="case" value="output" name="pro_output"></textarea></br></div>
        </div>
        <div>
            <span>
                <h5 class="header">&nbsp;알고리즘 분류&nbsp;</h5>
            </span>
            <hr class="case_hr">
            <div><textarea onkeydown="textarea_tab(this)" class="case" value="alg" name="pro_alg"></textarea></br></div>

        </div>
        <div class="wrap">
            <button type="button" class="button" onclick="request()">Add</button>
        </div>
    </form>
    </br>
    <!-- Footer-->
    <footer class="py-5 bg-dark">
        <div class="container px-5">
            <p class="m-0 text-center text-white">Copyright &copy; Your Website 2021</p>
        </div>
    </footer>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
</body>

</html>